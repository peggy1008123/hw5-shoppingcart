{"ast":null,"code":"var _jsxFileName = \"C:\\\\\\u4F5C\\u696D\\u7528\\u6A94\\u6848\\\\\\u524D\\u7AEF\\\\React-Course\\\\wk6\\\\F6_AddViewProductDetailtoCart\\\\src\\\\store\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { createContext } from \"react\";\nimport useReducerWithThunk from 'use-reducer-thunk';\nimport products from \"../json/products.json\";\nimport { SET_PAGE_CONTENT, SET_NAVBAR_ACTIVEITEM, ADD_CART_ITEM, REMOVE_CART_ITEM } from \"../utils/constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const StoreContext = /*#__PURE__*/createContext();\nlet cartItems = localStorage.getItem(\"cartItems\") ? JSON.parse(localStorage.getItem(\"cartItems\")) : [];\nconst initialState = {\n  page: {\n    title: \"NORDIC NEST Shopping Cart\",\n    products\n  },\n  navBar: {\n    activeItem: \"/\"\n  },\n  cartItems\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case SET_PAGE_CONTENT:\n      return { ...state,\n        page: action.payload\n      };\n\n    case SET_NAVBAR_ACTIVEITEM:\n      return { ...state,\n        navBar: {\n          activeItem: action.payload\n        }\n      };\n\n    case ADD_CART_ITEM:\n      const item = action.payload;\n      const product = state.cartItems.find(x => x.id === item.id);\n\n      if (product) {\n        cartItems = state.cartItems.map(x => x.id === product.id ? item : x);\n        return { ...state,\n          cartItems\n        };\n      }\n\n      cartItems = [...state.cartItems, item];\n      return { ...state,\n        cartItems\n      };\n\n    case REMOVE_CART_ITEM:\n      cartItems = state.cartItems.filter(x => x.id !== action.payload);\n      return { ...state,\n        cartItems\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport function StoreProvider(props) {\n  _s();\n\n  const [state, dispatch] = useReducerWithThunk(reducer, initialState, \"example\");\n  const value = {\n    state,\n    dispatch\n  };\n  return /*#__PURE__*/_jsxDEV(StoreContext.Provider, {\n    value: value,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 7\n  }, this);\n}\n\n_s(StoreProvider, \"P0eKCI6WtpOvzqf1JEHAprAawWs=\", false, function () {\n  return [useReducerWithThunk];\n});\n\n_c = StoreProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"StoreProvider\");","map":{"version":3,"sources":["C:/作業用檔案/前端/React-Course/wk6/F6_AddViewProductDetailtoCart/src/store/index.js"],"names":["createContext","useReducerWithThunk","products","SET_PAGE_CONTENT","SET_NAVBAR_ACTIVEITEM","ADD_CART_ITEM","REMOVE_CART_ITEM","StoreContext","cartItems","localStorage","getItem","JSON","parse","initialState","page","title","navBar","activeItem","reducer","state","action","type","payload","item","product","find","x","id","map","filter","StoreProvider","props","dispatch","value","children"],"mappings":";;;AAAA,SAASA,aAAT,QAA8B,OAA9B;AACA,OAAOC,mBAAP,MAAgC,mBAAhC;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,SACEC,gBADF,EAEEC,qBAFF,EAGEC,aAHF,EAIEC,gBAJF,QAKO,oBALP;;AAOA,OAAO,MAAMC,YAAY,gBAAGP,aAAa,EAAlC;AACP,IAAIQ,SAAS,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,IACdC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAX,CADc,GAEd,EAFF;AAIA,MAAMG,YAAY,GAAG;AAClBC,EAAAA,IAAI,EAAE;AACHC,IAAAA,KAAK,EAAE,2BADJ;AAEHb,IAAAA;AAFG,GADY;AAKlBc,EAAAA,MAAM,EAAE;AACLC,IAAAA,UAAU,EAAE;AADP,GALU;AAQlBT,EAAAA;AARkB,CAArB;;AAWA,SAASU,OAAT,CAAiBC,KAAjB,EAAwBC,MAAxB,EAAgC;AAC7B,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKlB,gBAAL;AACE,aAAO,EACL,GAAGgB,KADE;AAELL,QAAAA,IAAI,EAAEM,MAAM,CAACE;AAFR,OAAP;;AAIA,SAAKlB,qBAAL;AACC,aAAO,EACJ,GAAGe,KADC;AAEJH,QAAAA,MAAM,EAAE;AACLC,UAAAA,UAAU,EAAEG,MAAM,CAACE;AADd;AAFJ,OAAP;;AAMH,SAAKjB,aAAL;AACG,YAAMkB,IAAI,GAAGH,MAAM,CAACE,OAApB;AACA,YAAME,OAAO,GAAGL,KAAK,CAACX,SAAN,CAAgBiB,IAAhB,CAAsBC,CAAD,IAAOA,CAAC,CAACC,EAAF,KAASJ,IAAI,CAACI,EAA1C,CAAhB;;AACA,UAAIH,OAAJ,EAAa;AACVhB,QAAAA,SAAS,GAAGW,KAAK,CAACX,SAAN,CAAgBoB,GAAhB,CAAqBF,CAAD,IAC7BA,CAAC,CAACC,EAAF,KAASH,OAAO,CAACG,EAAjB,GAAsBJ,IAAtB,GAA6BG,CADpB,CAAZ;AAGA,eAAO,EAAE,GAAGP,KAAL;AAAYX,UAAAA;AAAZ,SAAP;AACF;;AACDA,MAAAA,SAAS,GAAG,CAAC,GAAGW,KAAK,CAACX,SAAV,EAAqBe,IAArB,CAAZ;AACA,aAAO,EAAE,GAAGJ,KAAL;AAAYX,QAAAA;AAAZ,OAAP;;AACH,SAAKF,gBAAL;AACGE,MAAAA,SAAS,GAAGW,KAAK,CAACX,SAAN,CAAgBqB,MAAhB,CAAwBH,CAAD,IAAOA,CAAC,CAACC,EAAF,KAASP,MAAM,CAACE,OAA9C,CAAZ;AACA,aAAO,EAAE,GAAGH,KAAL;AAAYX,QAAAA;AAAZ,OAAP;;AACH;AACE,aAAOW,KAAP;AA5BJ;AA8BF;;AAED,OAAO,SAASW,aAAT,CAAuBC,KAAvB,EAA8B;AAAA;;AAClC,QAAM,CAACZ,KAAD,EAAQa,QAAR,IAAoB/B,mBAAmB,CAACiB,OAAD,EAAUL,YAAV,EAAwB,SAAxB,CAA7C;AACA,QAAMoB,KAAK,GAAG;AAAEd,IAAAA,KAAF;AAASa,IAAAA;AAAT,GAAd;AAEA,sBACG,QAAC,YAAD,CAAc,QAAd;AAAuB,IAAA,KAAK,EAAEC,KAA9B;AAAA,cACIF,KAAK,CAACG;AADV;AAAA;AAAA;AAAA;AAAA,UADH;AAKF;;GATeJ,a;UACa7B,mB;;;KADb6B,a","sourcesContent":["import { createContext } from \"react\";\r\nimport useReducerWithThunk from 'use-reducer-thunk';\r\nimport products from \"../json/products.json\"\r\nimport {\r\n  SET_PAGE_CONTENT,\r\n  SET_NAVBAR_ACTIVEITEM,\r\n  ADD_CART_ITEM,\r\n  REMOVE_CART_ITEM,\r\n} from \"../utils/constants\"\r\n\r\nexport const StoreContext = createContext();\r\nlet cartItems = localStorage.getItem(\"cartItems\")\r\n? JSON.parse(localStorage.getItem(\"cartItems\"))\r\n: [];\r\n\r\nconst initialState = {\r\n   page: {\r\n      title: \"NORDIC NEST Shopping Cart\",\r\n      products,\r\n   },\r\n   navBar: {\r\n      activeItem: \"/\",\r\n   },\r\n   cartItems,\r\n};\r\n\r\nfunction reducer(state, action) {\r\n   switch (action.type) {\r\n     case SET_PAGE_CONTENT:\r\n       return {\r\n         ...state,\r\n         page: action.payload,\r\n       };\r\n       case SET_NAVBAR_ACTIVEITEM:\r\n        return {\r\n           ...state,\r\n           navBar: {\r\n              activeItem: action.payload\r\n           }\r\n        };\r\n     case ADD_CART_ITEM:\r\n        const item = action.payload;\r\n        const product = state.cartItems.find((x) => x.id === item.id);\r\n        if (product) {\r\n           cartItems = state.cartItems.map((x) =>\r\n              x.id === product.id ? item : x\r\n           );\r\n           return { ...state, cartItems };\r\n        }\r\n        cartItems = [...state.cartItems, item];\r\n        return { ...state, cartItems };\r\n     case REMOVE_CART_ITEM:\r\n        cartItems = state.cartItems.filter((x) => x.id !== action.payload);\r\n        return { ...state, cartItems };\r\n     default:\r\n       return state;\r\n   }\r\n}\r\n\r\nexport function StoreProvider(props) {\r\n   const [state, dispatch] = useReducerWithThunk(reducer, initialState, \"example\");\r\n   const value = { state, dispatch };\r\n\r\n   return (\r\n      <StoreContext.Provider value={value}>\r\n         {props.children}\r\n      </StoreContext.Provider>\r\n   );\r\n}"]},"metadata":{},"sourceType":"module"}